{"version":3,"sources":["webpack:///src/app/pedido/pedido.page.html","webpack:///src/app/pedido/pedido-routing.module.ts","webpack:///src/app/pedido/pedido.module.ts","webpack:///src/app/pedido/pedido.page.scss","webpack:///src/app/pedido/pedido.page.ts"],"names":["routes","path","component","PedidoPageRoutingModule","imports","forChild","exports","PedidoPageModule","declarations","PedidoPage","servicio","route","loading","alert","id","cliente_id","usuario_id","fecha","estado","subtotal","iva","total","mesa","clientes","usuarios","productos","productos_listado","_producto","pedido","estados","texto","snapshot","params","pedidoId","Cliente_Listado","subscribe","data","info","items","Usuario_Listado","Producto_Listado","Cargar_Informacion","Mensaje","console","log","create","l","present","Pedido_Guardar","dismiss","mensaje","irA","_","Pedido_Consulta","item","Pedido_Guardar_Producto","pedido_id","producto_id","cantidad","precio","producto","calcularTotal","prod","forEach","element","parseFloat","ionItemSliding","close","header","message","buttons","text","handler","Pedido_Borrar_Producto","item_id","selector","template"],"mappings":"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","file":"pedido-pedido-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"warning\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button text=\\\"\\\" defaultHref=\\\"pedidos\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title size=\\\"small\\\">{{id == 0 ? 'Nuevo' : 'Editar'}} pedido {{id == 0 ? '' : id}}</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"Guardar()\\\">\\n        <ion-icon name=\\\"save\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Cliente</ion-label>\\n      <ion-select placeholder=\\\"Seleccionar\\\" [(ngModel)]=\\\"cliente_id\\\" [disabled]=\\\"id != 0\\\" okText=\\\"Seleccionar\\\" cancelText=\\\"Cancelar\\\">\\n        <ion-select-option [value]=\\\"cliente.id\\\" *ngFor=\\\"let cliente of clientes\\\">{{cliente.nombre}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Atendido por:</ion-label>\\n      <ion-select placeholder=\\\"Seleccionar\\\" [(ngModel)]=\\\"usuario_id\\\" okText=\\\"Seleccionar\\\" cancelText=\\\"Cancelar\\\">\\n        <ion-select-option [value]=\\\"usuario.id\\\" *ngFor=\\\"let usuario of usuarios\\\">{{usuario.nombre}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Fecha</ion-label>\\n      <ion-datetime displayFormat=\\\"DD/MM/YYYY\\\" placeholder=\\\"Seleccionar fecha\\\" [disabled]=\\\"id != 0\\\" cancelText=\\\"Cancelar\\\" doneText=\\\"Seleccionar\\\" [(ngModel)]=\\\"fecha\\\"></ion-datetime>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\"># Mesa</ion-label>\\n      <ion-input [(ngModel)]=\\\"mesa\\\" type=\\\"number\\\" disabled></ion-input>\\n    </ion-item>\\n    <ion-item *ngIf=\\\"id != 0\\\">\\n      <ion-label position=\\\"stacked\\\">Estado</ion-label>\\n      <ion-select placeholder=\\\"Seleccionar\\\" [(ngModel)]=\\\"estado\\\" okText=\\\"Seleccionar\\\" cancelText=\\\"Cancelar\\\">\\n        <ion-select-option [value]=\\\"est.id\\\" *ngFor=\\\"let est of estados\\\">{{est.texto}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n\\n    <ion-item *ngIf=\\\"id != 0\\\">\\n      <ion-label position=\\\"stacked\\\">Productos</ion-label>\\n      <ion-select placeholder=\\\"Seleccionar\\\" [(ngModel)]=\\\"_producto\\\" okText=\\\"Seleccionar\\\" cancelText=\\\"Cancelar\\\" (ionChange)=\\\"Prod_Seleccionado()\\\">\\n        <ion-select-option [value]=\\\"producto\\\" *ngFor=\\\"let producto of productos\\\">{{producto.nombre}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n\\n    <ion-list-header color=\\\"danger\\\">\\n      Detalle productos\\n    </ion-list-header>\\n    <ion-item-sliding *ngFor=\\\"let _prod of productos_listado\\\" #ionItemSliding>\\n      <ion-item>\\n        <ion-label text-wrap>\\n          <h3>{{_prod.nombre|uppercase}}</h3>\\n          <p><b>Precio:</b> ${{_prod.precio|number}}</p>\\n        </ion-label>\\n        <ion-input slot=\\\"end\\\" [(ngModel)]=\\\"_prod.cantidad\\\" (ionChange)=\\\"Mod_Producto(_prod)\\\" type=\\\"number\\\"></ion-input>\\n      </ion-item>\\n      <ion-item-options side=\\\"end\\\">\\n        <ion-item-option color=\\\"danger\\\" (click)=\\\"Borrar_Producto(_prod, ionItemSliding)\\\">\\n          <ion-icon name=\\\"trash\\\"></ion-icon>\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>\\n    <ion-list-header color=\\\"success\\\">\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col><strong>Subtotal: </strong>{{subtotal|currency}}</ion-col>\\n          <ion-col><strong>Iva: </strong>{{iva|currency}}</ion-col>\\n          <ion-col><strong>Total: </strong>{{total|currency}}</ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </ion-list-header>\\n  </ion-list>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PedidoPage } from './pedido.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PedidoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PedidoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PedidoPageRoutingModule } from './pedido-routing.module';\n\nimport { PedidoPage } from './pedido.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PedidoPageRoutingModule\n  ],\n  declarations: [PedidoPage]\n})\nexport class PedidoPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BlZGlkby9wZWRpZG8ucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\nimport { ServiciosService } from '../servicios.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { LoadingController, IonItemSliding, AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-pedido',\n  templateUrl: './pedido.page.html',\n  styleUrls: ['./pedido.page.scss'],\n})\nexport class PedidoPage implements OnInit {\n\n  public id: number = 0;\n  public cliente_id: number = 0;\n  public usuario_id: number = 0;\n  public fecha: any = null;\n  public estado: number = 0;\n  public subtotal: number = 0;\n  public iva: number = 0;\n  public total: number = 0;\n  public mesa: number = 0;\n\n  public clientes: any[] = [];\n  public usuarios: any[] = [];\n  public productos: any[] = [];\n  public productos_listado: any[] = [];\n  public _producto: any = null;\n  public pedido: any = null;\n\n\n  public estados: any[] = [\n    {\n      id: 0,\n      texto: 'Creado'\n    },\n    {\n      id: 1,\n      texto: 'Procesado'\n    },\n    {\n      id: 2,\n      texto: 'Finalizado'\n    }\n  ];\n\n  constructor(\n    public servicio: ServiciosService,\n    public route: ActivatedRoute,\n    public loading: LoadingController,\n    public alert: AlertController\n  ) {\n    this.id = this.route.snapshot.params.pedidoId ? this.route.snapshot.params.pedidoId : 0;\n  }\n\n  async ionViewWillEnter() {\n    this.servicio.Cliente_Listado()\n      .subscribe((data: any) => {\n        this.clientes = data.info.items;\n      });\n\n    this.servicio.Usuario_Listado()\n      .subscribe((data: any) => {\n        this.usuarios = data.info.items;\n      });\n\n    this.servicio.Producto_Listado()\n      .subscribe((data: any) => {\n        this.productos = data.info.items;\n      });\n\n    if (this.id > 0) {\n      this.Cargar_Informacion();\n    }\n  }\n\n  ngOnInit() {\n  }\n\n  async Guardar() {\n    if (this.cliente_id == 0) {\n      this.servicio.Mensaje('Debe seleccionar el cliente.', 'warning');\n    } else if (this.usuario_id == 0) {\n      this.servicio.Mensaje('Debe seleccionar el vendedor.', 'warning');\n    } else if (this.fecha == null) {\n      this.servicio.Mensaje('Debe seleccioanr la fecha.', 'warning');\n    } else {\n      console.log(this.fecha);\n      let l = await this.loading.create();\n      l.present();\n      this.servicio.Pedido_Guardar({\n        id: this.id,\n        cliente_id: this.cliente_id,\n        usuario_id: this.usuario_id,\n        fecha: this.fecha,\n        estado: this.estado,\n        subtotal: this.subtotal,\n        iva: this.iva,\n        total: this.total,\n      }).subscribe((data: any) => {\n        l.dismiss();\n        this.servicio.Mensaje(data.mensaje, data.info.id == 0 ? 'danger' : 'success');\n        if (data.info.id > 0) {\n          this.servicio.irA('/pedidos');\n        }\n      }, _ => {\n        l.dismiss();\n        this.servicio.Mensaje('No se pudo realizar la petición.', 'danger');\n      });\n    }\n  }\n\n  async Cargar_Informacion() {\n    let l = await this.loading.create();\n    l.present();\n    this.servicio.Pedido_Consulta(this.id)\n      .subscribe((data: any) => {\n        console.log(data.info.item.mesa);\n        l.dismiss();\n        if (data.info.item.id > 0) {\n          this.cliente_id = data.info.item.cliente_id;\n          this.usuario_id = data.info.item.usuario_id;\n          this.estado = data.info.item.estado;\n          this.fecha = data.info.item.fecha;\n          this.productos_listado = data.info.item.items;\n          this.subtotal = data.info.item.subtotal;\n          this.iva = data.info.item.iva;\n          this.total = data.info.item.total;\n          this.pedido = data.info.item;\n          this.mesa = data.info.item.mesa;\n        } else {\n          this.servicio.Mensaje('El pedido que intenta consultar no existe.', 'danger');\n          this.servicio.irA('/pedidos');\n        }\n      }, _ => {\n        l.dismiss();\n        this.servicio.Mensaje('No se pudo realizar la petición.', 'danger');\n        this.servicio.irA('/pedidos');\n      });\n  }\n\n  async Prod_Seleccionado() {\n    let l = await this.loading.create();\n    l.present();\n    this.servicio.Pedido_Guardar_Producto({\n      pedido_id: this.id,\n      producto_id: this._producto.id,\n      cantidad: 1,\n      precio: this._producto.precio\n    }).subscribe((data: any) => {\n      l.dismiss();\n      this.Cargar_Informacion();\n    }, _ => {\n      l.dismiss();\n    });\n  }\n\n  async Mod_Producto(producto: any) {\n    let l = await this.loading.create();\n    l.present();\n    this.servicio.Pedido_Guardar_Producto({\n      pedido_id: this.id,\n      producto_id: producto.producto_id,\n      cantidad: producto.cantidad,\n      precio: producto.precio\n    }).subscribe((data: any) => {\n      l.dismiss();\n\n       //this.Cargar_Informacion();\n        this.calcularTotal();\n\n    }, _ => {\n      l.dismiss();\n    });\n  }\n\n  Calcular_Total(): number {\n    let total: number = 0;\n    for (let prod of this.productos_listado) {\n      total += prod.cantidad * prod.precio;\n    }\n    return total;\n  }\n\n  calcularTotal(){\n      this.subtotal = 0;\n      console.log(this.pedido);\n      this.pedido.items.forEach(element => {\n            this.subtotal = this.subtotal + (parseFloat(element.precio) * element.cantidad);\n        });\n        console.log(this.subtotal);\n        this.iva = this.subtotal * 0.12;\n        this.total = this.subtotal + this.iva;\n    \n  }\n\n  async Borrar_Producto(producto: any, ionItemSliding: IonItemSliding) {\n    ionItemSliding.close();\n\n    let alert = await this.alert.create({\n      header: 'Confirmación',\n      message: '¿Está seguro que desea eliminar?',\n      buttons: [\n        {\n          text: 'Si',\n          handler: async () => {\n            let l = await this.loading.create();\n            l.present();\n            this.servicio.Pedido_Borrar_Producto({\n              pedido_id: this.id,\n              item_id: producto.id\n            }).subscribe((data: any) => {\n              l.dismiss();\n              this.Cargar_Informacion();\n            }, _ => {\n              l.dismiss();\n            });\n          }\n        },\n        {\n          text: 'No',\n          handler: () => {\n\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n}\n"]}